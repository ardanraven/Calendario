<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coven do Corvo | Calend√°rio Lunar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;700;900&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,600;1,400&display=swap" rel="stylesheet">
    
    <style>
        /* --- Base & Atmosfera --- */
        body {
            background-color: #030303; /* Preto Absoluto */
            color: #e5e5e5;
            font-family: 'Cormorant Garamond', serif; /* Fonte de corpo mais elegante */
            min-height: 100vh;
            background-image: 
                radial-gradient(circle at 50% 0%, rgba(50, 40, 90, 0.15) 0%, transparent 50%),
                linear-gradient(to bottom, #030303 0%, #0a0a0a 100%);
            overflow-x: hidden;
        }

        h1, h2, h3, .font-title {
            font-family: 'Cinzel', serif;
            letter-spacing: 0.05em;
        }

        /* --- O "Grim√≥rio" (Container Principal) --- */
        .grimoire-card {
            background: linear-gradient(180deg, rgba(20, 20, 20, 0.95) 0%, rgba(10, 10, 10, 0.98) 100%);
            border: 1px solid rgba(184, 134, 11, 0.15); /* Dourado escuro sutil */
            box-shadow: 
                0 0 0 1px rgba(0,0,0, 0.8), /* Borda interna escura */
                0 20px 50px -10px rgba(0, 0, 0, 1),
                inset 0 0 60px rgba(0,0,0,0.8);
            position: relative;
        }

        /* Detalhe decorativo no topo (Linha de Ouro) */
        .grimoire-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 20%;
            right: 20%;
            height: 1px;
            background: linear-gradient(90deg, transparent, rgba(184, 134, 11, 0.6), transparent);
        }

        /* --- Grade do Calend√°rio --- */
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 1px;
            background: rgba(184, 134, 11, 0.1); /* Linhas douradas finas */
            border: 1px solid rgba(184, 134, 11, 0.1);
        }

        .day-cell {
            background-color: #080808;
            min-height: 140px;
            padding: 0.75rem;
            display: flex;
            flex-direction: column;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        /* Efeito "Asa de Corvo" no Hover */
        .day-cell:hover {
            background-color: #0d0d0d;
            box-shadow: inset 0 0 20px rgba(25, 25, 50, 0.3); /* Brilho azulado/roxo sutil */
        }
        .day-cell:hover .day-number {
            color: #d4af37; /* Dourado ao passar o mouse */
        }

        /* Dia de Hoje */
        .day-cell.today {
            background: linear-gradient(135deg, rgba(20, 20, 25, 1), rgba(10, 10, 15, 1));
        }
        .day-cell.today::after {
            content: '';
            position: absolute;
            inset: 0;
            border: 1px solid rgba(184, 134, 11, 0.4);
            box-shadow: inset 0 0 15px rgba(184, 134, 11, 0.05);
            pointer-events: none;
        }

        .day-cell.other-month {
            opacity: 0.3;
            background-color: #030303;
            pointer-events: none;
        }

        /* --- Tipografia dos Dias --- */
        .day-number {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: #525252;
            transition: color 0.3s ease;
        }
        .today .day-number {
            color: #e5e5e5;
            text-shadow: 0 0 10px rgba(229, 229, 229, 0.3);
        }

        /* --- Lua & Marcadores --- */
        .moon-icon {
            font-size: 1.2rem;
            filter: grayscale(100%) brightness(0.8);
            transition: all 0.5s ease;
            opacity: 0.5;
        }
        .day-cell:hover .moon-icon {
            filter: grayscale(0%) brightness(1.2); /* Revela a cor/brilho no hover */
            opacity: 1;
            transform: scale(1.1);
        }

        /* Marcadores de Festivais (Minimalistas) */
        .event-dot {
            width: 4px;
            height: 4px;
            border-radius: 50%;
            margin-right: 4px;
            display: inline-block;
        }
        
        .festival-text {
            font-size: 0.7rem;
            line-height: 1.3;
            margin-top: 4px;
            color: #888;
            font-weight: 300;
            letter-spacing: 0.02em;
            text-transform: uppercase;
        }

        /* Cores Tem√°ticas Refinadas */
        .text-deipnon { color: #9f7aea; } /* Roxo m√≠stico */
        .dot-deipnon { background-color: #9f7aea; box-shadow: 0 0 6px rgba(159, 122, 234, 0.4); }
        
        .text-noumenia { color: #93c5fd; } /* Azul et√©reo */
        .dot-noumenia { background-color: #93c5fd; box-shadow: 0 0 6px rgba(147, 197, 253, 0.4); }
        
        .text-fullmoon { color: #d4af37; } /* Dourado real */
        .dot-fullmoon { background-color: #d4af37; box-shadow: 0 0 8px rgba(212, 175, 55, 0.5); }

        .text-festival { color: #a3a3a3; }
        
        /* Bot√µes de Navega√ß√£o */
        .nav-btn {
            color: #666;
            transition: all 0.3s;
            border: 1px solid transparent;
        }
        .nav-btn:hover {
            color: #d4af37;
            transform: translateY(-1px);
        }

        /* Efeito de Vidro Fosco para o Header */
        .glass-header {
            background: rgba(10, 10, 10, 0.6);
            backdrop-filter: blur(8px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.03);
        }

    </style>
</head>
<body class="flex flex-col items-center py-8 sm:py-12 px-2">

    <main class="w-full max-w-5xl grimoire-card rounded-sm p-1 sm:p-2 shadow-2xl">
        
        <div class="border border-white/5 p-4 sm:p-8 rounded-sm h-full">

            <header class="mb-10 text-center relative">
                
                <div class="text-3xl mb-2 text-gray-600 opacity-50">‚ú¶</div>
                
                <h1 class="text-4xl sm:text-5xl text-transparent bg-clip-text bg-gradient-to-r from-gray-200 via-gray-100 to-gray-400 font-bold mb-2 uppercase tracking-widest drop-shadow-md">
                    Coven do Corvo
                </h1>
                <div class="w-24 h-[1px] bg-gradient-to-r from-transparent via-[#d4af37] to-transparent mx-auto mb-4 opacity-70"></div>
                <p class="text-[#888] text-sm tracking-[0.3em] uppercase font-light">Calend√°rio Ritual√≠stico</p>

                <div class="mt-6 md:mt-0 md:absolute md:right-0 md:top-2 flex flex-col items-center md:items-end group">
                    <div id="current-moon-emoji-lg" class="text-3xl text-gray-400 group-hover:text-[#d4af37] transition-colors duration-500 cursor-default">üåë</div>
                    <span class="text-[0.6rem] uppercase tracking-widest text-gray-600 mt-1">Fase Atual</span>
                    <span id="current-moon-name" class="text-sm text-gray-300 font-cinzel">Lua Nova</span>
                </div>
            </header>

            <div class="flex justify-between items-end mb-6 px-2">
                <button id="prev-month" class="nav-btn font-cinzel text-sm uppercase tracking-wider hover:text-[#d4af37] flex items-center gap-2">
                    <span>&larr;</span> Anterior
                </button>
                
                <h2 id="month-year" class="text-2xl sm:text-3xl text-[#d4af37] font-medium text-center uppercase tracking-wide">
                    </h2>
                
                <button id="next-month" class="nav-btn font-cinzel text-sm uppercase tracking-wider hover:text-[#d4af37] flex items-center gap-2">
                    Pr√≥ximo <span>&rarr;</span>
                </button>
            </div>

            <div class="grid grid-cols-7 gap-1 mb-4 border-b border-white/5 pb-2">
                <div class="text-center text-[#555] font-cinzel text-xs uppercase tracking-widest">Dom</div>
                <div class="text-center text-[#736598] font-cinzel text-xs uppercase tracking-widest font-semibold" title="Dia de Hekate">Seg</div>
                <div class="text-center text-[#555] font-cinzel text-xs uppercase tracking-widest">Ter</div>
                <div class="text-center text-[#555] font-cinzel text-xs uppercase tracking-widest">Qua</div>
                <div class="text-center text-[#555] font-cinzel text-xs uppercase tracking-widest">Qui</div>
                <div class="text-center text-[#555] font-cinzel text-xs uppercase tracking-widest">Sex</div>
                <div class="text-center text-[#736598] font-cinzel text-xs uppercase tracking-widest font-semibold" title="Dia de Hekate">S√°b</div>
            </div>

            <div id="calendar-grid" class="calendar-grid rounded-sm overflow-hidden">
                </div>

            <footer class="mt-8 flex flex-wrap justify-center gap-8 text-xs text-gray-500 font-light border-t border-white/5 pt-6 uppercase tracking-wider">
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-[#9f7aea] shadow-[0_0_5px_#9f7aea]"></span> Deipnon
                </div>
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-[#93c5fd] shadow-[0_0_5px_#93c5fd]"></span> Noumenia
                </div>
                <div class="flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-[#d4af37] shadow-[0_0_5px_#d4af37]"></span> Lua Cheia
                </div>
            </footer>

        </div>
    </main>

    <script>
        // --- L√ìGICA DO COVEN ---

        let currentDate = new Date();
        const today = new Date();
        today.setHours(0, 0, 0, 0);

        const calendarGrid = document.getElementById('calendar-grid');
        const monthYearHeader = document.getElementById('month-year');
        const prevButton = document.getElementById('prev-month');
        const nextButton = document.getElementById('next-month');
        const currentMoonEmojiDisplay = document.getElementById('current-moon-emoji-lg');
        const currentMoonNameDisplay = document.getElementById('current-moon-name');

        const MOON_EMOJI = ['üåë', 'üåí', 'üåì', 'üåî', 'üåï', 'üåñ', 'üåó', 'üåò'];
        const MOON_NAMES = [
            'Lua Nova', 'Crescente', 'Quarto Cresc.', 'Gibosa Cresc.', 
            'Lua Cheia', 'Gibosa Ming.', 'Quarto Ming.', 'Minguante'
        ];

        // C√°lculo de Fase da Lua (Simplificado)
        function getMoonPhase(date) {
            const knownNewMoon = new Date(2000, 0, 6); 
            const synodic = 29.53058867;
            const diffTime = date.getTime() - knownNewMoon.getTime();
            const diffDays = diffTime / (86400000);
            const cycle = diffDays % synodic;
            const phase = Math.floor((cycle / synodic) * 8);
            return (phase >= 0 && phase <= 7) ? phase : 0;
        }

        // Eventos do Coven (Dezembro 2025)
        function getEvents(date) {
            const d = date.getDate();
            const m = date.getMonth();
            const y = date.getFullYear();
            const events = [];

            if (y === 2025 && m === 11) { // Dezembro
                if (d === 5) events.push({ name: "Lua Cheia", type: "fullmoon" });
                if (d === 19) events.push({ name: "Deipnon", type: "deipnon" });
                if (d === 20) events.push({ name: "Noumenia", type: "noumenia" });
                if (d === 21) events.push({ name: "Yule / Solst√≠cio", type: "gold" });
                if (d === 25) events.push({ name: "Haloa", type: "normal" });
            }
            // Retrocompatibilidade Novembro
            if (y === 2025 && m === 10) {
                if (d === 5) events.push({ name: "Lua Cheia", type: "fullmoon" });
                if (d === 21) events.push({ name: "Deipnon", type: "deipnon" });
                if (d === 22) events.push({ name: "Noumenia", type: "noumenia" });
            }

            return events;
        }

        function render() {
            calendarGrid.innerHTML = '';
            const y = currentDate.getFullYear();
            const m = currentDate.getMonth();

            // T√≠tulo
            const mName = currentDate.toLocaleString('pt-BR', { month: 'long' });
            monthYearHeader.innerText = `${mName} ${y}`;

            // Datas
            const firstDay = new Date(y, m, 1);
            const lastDay = new Date(y, m + 1, 0);
            const startDow = firstDay.getDay();
            const prevLast = new Date(y, m, 0).getDate();

            for (let i = 0; i < 42; i++) {
                const cell = document.createElement('div');
                cell.className = 'day-cell group';

                let dNum, dObj, isOther = false;

                if (i < startDow) {
                    dNum = prevLast - startDow + 1 + i;
                    dObj = new Date(y, m - 1, dNum);
                    isOther = true;
                    cell.classList.add('other-month');
                } else if (i >= startDow + lastDay.getDate()) {
                    dNum = i - startDow - lastDay.getDate() + 1;
                    dObj = new Date(y, m + 1, dNum);
                    isOther = true;
                    cell.classList.add('other-month');
                } else {
                    dNum = i - startDow + 1;
                    dObj = new Date(y, m, dNum);
                }
                dObj.setHours(0,0,0,0);

                const phase = getMoonPhase(dObj);
                const evs = getEvents(dObj);

                // HTML da C√©lula
                let html = `
                    <div class="flex justify-between items-start mb-2">
                        <span class="day-number">${dNum}</span>
                        <span class="moon-icon" title="${MOON_NAMES[phase]}">${MOON_EMOJI[phase]}</span>
                    </div>
                `;

                evs.forEach(ev => {
                    let colorClass = "text-festival"; // Padr√£o
                    let dotClass = "bg-gray-600";
                    
                    if (ev.type === 'deipnon') { colorClass = "text-deipnon"; dotClass = "dot-deipnon"; }
                    if (ev.type === 'noumenia') { colorClass = "text-noumenia"; dotClass = "dot-noumenia"; }
                    if (ev.type === 'fullmoon') { colorClass = "text-fullmoon"; dotClass = "dot-fullmoon"; }
                    if (ev.type === 'gold') { colorClass = "text-[#d4af37] font-semibold"; dotClass = "bg-[#d4af37]"; }

                    html += `
                        <div class="festival-text ${colorClass} truncate">
                            ${ev.type !== 'normal' ? `<span class="event-dot ${dotClass}"></span>` : ''}
                            ${ev.name}
                        </div>
                    `;
                });

                cell.innerHTML = html;

                if (dObj.getTime() === today.getTime()) {
                    cell.classList.add('today');
                    currentMoonEmojiDisplay.innerText = MOON_EMOJI[phase];
                    currentMoonNameDisplay.innerText = MOON_NAMES[phase];
                }

                calendarGrid.appendChild(cell);
            }
        }

        prevButton.onclick = () => { currentDate.setMonth(currentDate.getMonth() - 1); render(); };
        nextButton.onclick = () => { currentDate.setMonth(currentDate.getMonth() + 1); render(); };

        render();
    </script>
</body>
</html>
